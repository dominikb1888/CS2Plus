
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>12. Heuristic Search &#8212; Data Structures and Algorithms with Python</title>
    <link rel="stylesheet" href="../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="11. B-Trees" href="../chap10/chap10.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
          <p class="logo"><a href="../index.html">
            <img class="logo" src="../_static/csbook.JPG" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="../index.html">Data Structures and Algorithms with Python</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="../chap10/chap10.html" title="11. B-Trees"
             accesskey="P">previous</a> |
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="heuristic-search">
<span id="chap12"></span><h1>12. Heuristic Search<a class="headerlink" href="#heuristic-search" title="Permalink to this headline">¶</a></h1>
<p>This text has focused on the interaction of algorithms with data structures. Many of the algorithms presented in this text deal with search and how to organize data so searching can be done efficiently. Many problems involve searching for an answer among many possible solutions, not all of which are correct. Sometimes, there are so many possibilities, no algorithm can be written that will efficiently find a correct solution amongst all the possible solutions. In these cases, we may be able to use a <em>rule of thumb</em>, most often called a <em>heuristic</em> in computer science, to eliminate some of these possibilities from our search space. If the <em>heuristic</em> does not eliminate possible solutions, it may at least help us order the possible solutions so we look at <em>better</em> possible solutions first, whatever <em>better</em> might mean.</p>
<p>In <a class="reference internal" href="../chap7/chap7.html#graphchap">chapter 7</a> depth first search of a graph was presented. Sometimes search spaces for graphs or other problems grow to such an enormous size, it is impossible to blindly search for a goal node. This is where a heuristic can come in handy. This chapter uses searching a maze, which is really just a type of graph, as an example to illustrate several search algorithms that are related to depth first or breadth first search. Several applications of these search algorithms are also presented or discussed.</p>
<p>Heuristic search is often covered in texts on Artificial Intelligence <a href="#id1"><span class="problematic" id="id2">:cite:`AIIlluminated`</span></a>. As problems in AI are better understood, algorithms arise that become more commonplace over time. The heuristic algorithms presented in this chapter are covered in more detail in an AI text, but as data sizes grow, heuristic search will become more and more necessary in all sorts of applications. AI techniques may be useful in many search problems and so are covered in this chapter to provide an introduction to search algorithms designed to deal with large or infinite search spaces.</p>
<div class="section" id="searching-mazes">
<h2>12.1. Searching Mazes<a class="headerlink" href="#searching-mazes" title="Permalink to this headline">¶</a></h2>
<p>You can write your own maze search code that interacts with a front-end that is provided here. You can <a class="reference download internal" download="" href="../_downloads/9131dc1cb50a93ca271c5f0d8a498775/mazeanimate.py"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a> the front-end code by clicking here. The front-end code requires the <a class="reference download internal" download="" href="../_downloads/d958534c6266f0b07690010976a316b0/tile20.gif"><code class="xref download docutils literal notranslate"><span class="pre">tile20.gif</span></code></a> file. It also requires at least one maze file. The file maze3.txt was used in the text to demonstrate the various search algorithms. Here are three maze files for downloading.</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference download internal" download="" href="../_downloads/fe116acceaab1ae417500e1422fa12c6/maze.txt"><code class="xref download docutils literal notranslate"><span class="pre">maze.txt</span></code></a></li>
<li><a class="reference download internal" download="" href="../_downloads/76cc5d07ee9b0e568d629cc1f3ade636/maze2.txt"><code class="xref download docutils literal notranslate"><span class="pre">maze2.txt</span></code></a></li>
<li><a class="reference download internal" download="" href="../_downloads/7cf7b2a26b29851ba3b77e5143cfd659/maze3.txt"><code class="xref download docutils literal notranslate"><span class="pre">maze3.txt</span></code></a></li>
</ul>
</div></blockquote>
<p>Of course, you can write your own maze file as well. The format requires the number of rows on the first line, followed by the number of columns on the second line. Then the rest of the maze on the following lines must have an opening at the top for the entrance and an opening at the bottom for the exit.</p>
<p>The program is written as a front-end. Your challenge is to provide a back-end that supports the given search types. The architecture for your back-end is described at the top of the front-end code. The front-end is written to support five types of search, depth-first, bread-first, hill climbing, best-first, and a-star. If you wish to see a demonstration of these search types without writing your own back-end code first, you can <a class="reference download internal" download="" href="../_downloads/a7c47fca2ac6c02587ae6f4a9dd1c614/search.fas"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a> the search.fas file which is a compiled CLISP back-end. You must have CLISP installed on your system to run this back-end code.</p>
<p>Here is the front-end code for your reference.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">tkinter</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># The following program will animate a search algorithm written in a language of</span>
<span class="c1"># your choice. The only requirement is that the programming language is able to </span>
<span class="c1"># write to standard output and read from standard input following the architecture</span>
<span class="c1"># outlined below. The program that you write is the back-end communicating to this</span>
<span class="c1"># front-end code. A compiled lisp program serves as a back-end for demonstration</span>
<span class="c1"># purposes and can be downloaded from the text website. This front-end</span>
<span class="c1"># program and the back-end program communicate through pipes (both input and output)</span>
<span class="c1"># according to this architecture. When a command is sent to the back-end it is indicated </span>
<span class="c1"># with a right arrow indicating something is written to the back-end program&#39;s </span>
<span class="c1"># standard input. When the back-end program sends something to this front-end</span>
<span class="c1"># it is indicated with a left arrow. That means it is written to the standard</span>
<span class="c1"># output of the back-end program. </span>

<span class="c1"># front-end    back-end</span>
<span class="c1">#   dfs ---------&gt;     # A search type is selected, the back-end program must read</span>
<span class="c1">#   maze.txt ----&gt;     # The filename is passed to the back-end program</span>
<span class="c1">#   &lt;----------- 0 10  # these are the row column pairs of visited locations</span>
<span class="c1">#   ...                # repeating until the search is complete</span>
<span class="c1">#   &lt;----------- done  # Then done is printed by the back-end</span>
<span class="c1">#   &lt;----------- 31 22 # Finally the path is printed in reverse order</span>
<span class="c1">#   ...                # All locations are printed</span>
<span class="c1">#   &lt;----------- eof   # EOF is printed back to be sent back to this application.</span>

<span class="c1"># If you wish to implement your own back-end you must alter the line of code below</span>
<span class="c1"># that looks like this:</span>
<span class="c1">#</span>
<span class="c1"># proc = subprocess.Popen([&quot;clisp&quot;,&quot;search.fas&quot;],stdout=subprocess.PIPE, \</span>
<span class="c1">#    stdin=subprocess.PIPE,universal_newlines=True)</span>
<span class="c1">#</span>
<span class="c1"># You must replace clisp with the program that starts your program running. If you</span>
<span class="c1"># have written your back-end with python 3.x then replace clisp with python3. </span>
<span class="c1"># The search.fas should be replaced by any command-line arguments to your program. If </span>
<span class="c1"># you have written your program in python, then the argument should be the name of your</span>
<span class="c1"># program which must be in the same directory as this front-end code and the mazes you</span>
<span class="c1"># with to search. </span>
<span class="c1">#</span>
<span class="c1"># Output that you want to print for debugging purposes can be written to standard error</span>
<span class="c1"># instead of standard output. In this way standard output can be used to communicate</span>
<span class="c1"># with the front-end while you still see output printed to the terminal window for </span>
<span class="c1"># debugging purposes. In python, standard error can be written to as follows:</span>
<span class="c1">#</span>
<span class="c1"># import sys</span>
<span class="c1"># sys.stderr.write(&#39;Your text goes here.\n&#39;)</span>
<span class="c1">#</span>
<span class="c1"># This architecture must be adhered to strictly for this program to work. The search </span>
<span class="c1"># types supported by the front-end code are: dfs, bfs, hill, best, astar. Here</span>
<span class="c1"># is sample Lisp code that will handle this interaction from the front-end code. </span>

<span class="c1">#(defun processCommand ()</span>
  <span class="c1">#(let ((searchTtype &quot;&quot;) </span>
        <span class="c1">#(filename &quot;&quot;)</span>
        <span class="c1">#(path nil))</span>


    <span class="c1">#(setf searchType (read-line))</span>
    <span class="c1">#(format *error-output* &quot;Lisp says - Search Type is ~S~%&quot;  searchType)</span>
    <span class="c1">#(setf filename (read-line))</span>


    <span class="c1">#(cond ((equal searchType &quot;dfs&quot;) (setf path (dfsMaze filename)))</span>
          <span class="c1">#((equal searchType &quot;bfs&quot;) (setf path (bfsMaze filename))))</span>

    <span class="c1">#(format t &quot;done~%&quot;)</span>
    <span class="c1">#(printPath path)</span>
    <span class="c1">#(format t &quot;eof~%&quot;)))</span>

<span class="c1">#(processCommand)</span>


<span class="k">class</span> <span class="nc">MazeAnimateApplication</span><span class="p">(</span><span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buildWindow</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">buildWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Maze Search Animation&quot;</span><span class="p">)</span>

        <span class="n">bar</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span>
        <span class="n">fileMenu</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span><span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
                <span class="k">return</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">screen</span> <span class="o">=</span> <span class="n">theTurtle</span><span class="o">.</span><span class="n">getscreen</span><span class="p">()</span>
                <span class="n">screen</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="n">screen</span><span class="o">.</span><span class="n">tracer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">screen</span><span class="o">.</span><span class="n">setworldcoordinates</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">800</span><span class="p">,</span><span class="mi">1300</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="n">screen</span>            
                <span class="n">screen</span><span class="o">.</span><span class="n">register_shape</span><span class="p">(</span><span class="s2">&quot;tile20.gif&quot;</span><span class="p">)</span>            
                <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="o">.</span><span class="n">get</span><span class="p">(),</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
            
                <span class="n">firstLine</span> <span class="o">=</span> <span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                <span class="n">rows</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">firstLine</span><span class="p">)</span>
                <span class="n">secondLine</span> <span class="o">=</span> <span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                <span class="n">cols</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">secondLine</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="n">cols</span> <span class="o">&gt;</span> <span class="mi">65</span> <span class="ow">or</span> <span class="n">rows</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">:</span>
                    <span class="n">tkinter</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s2">&quot;Information&quot;</span><span class="p">,</span> \
                        <span class="s2">&quot;Maximum allowed rows is 40 and the maximum allowed columns are 65&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">return</span> 
            
                <span class="n">screen</span><span class="o">.</span><span class="n">register_shape</span><span class="p">(</span><span class="s2">&quot;tile20.gif&quot;</span><span class="p">)</span>
                 
                <span class="n">screen</span><span class="o">.</span><span class="n">tracer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cols</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
                            <span class="n">tile</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">RawTurtle</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
                            <span class="n">tile</span><span class="o">.</span><span class="n">penup</span><span class="p">()</span>
                            <span class="n">tile</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="s2">&quot;tile20.gif&quot;</span><span class="p">)</span>
                            <span class="n">tile</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">j</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">i</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="mi">10</span><span class="p">)</span>
                            
                <span class="n">screen</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                
                <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;clisp&quot;</span><span class="p">,</span><span class="s2">&quot;search.fas&quot;</span><span class="p">],</span><span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> \
                    <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span><span class="n">universal_newlines</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="n">fromLisp</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdout</span>
                <span class="n">toLisp</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdin</span>
                <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rbSelection</span><span class="p">())</span>
                <span class="n">toLisp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rbSelection</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="n">toLisp</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
                <span class="n">toLisp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">toLisp</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
                  
                <span class="n">t</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">RawTurtle</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
                <span class="n">t</span><span class="o">.</span><span class="n">penup</span><span class="p">()</span>
                <span class="n">t</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
                <span class="n">t</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>
                
                <span class="n">line</span> <span class="o">=</span> <span class="n">fromLisp</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">screen</span><span class="o">.</span><span class="n">tracer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                
                <span class="k">while</span> <span class="n">line</span> <span class="o">!=</span> <span class="s2">&quot;done&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
                    <span class="c1"># process line of currently inspected node</span>
                    <span class="n">lst</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                    <span class="n">t</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">col</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">row</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="mi">10</span><span class="o">+</span><span class="mi">5</span><span class="p">)</span>
                    <span class="c1">#t.dot(10)</span>
                    <span class="n">t</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">length</span><span class="p">),</span><span class="n">align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Arial&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">))</span>
        
                    <span class="c1"># read the next line</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">fromLisp</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        
                <span class="n">t</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">fromLisp</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                
                <span class="k">while</span> <span class="n">line</span> <span class="o">!=</span> <span class="s2">&quot;eof&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
                        
                    <span class="c1"># process line of final path node</span>
                    <span class="n">lst</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                    <span class="n">t</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">col</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span><span class="n">row</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="mi">10</span><span class="o">+</span><span class="mi">5</span><span class="p">)</span>
                    <span class="n">t</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">length</span><span class="p">),</span><span class="n">align</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Arial&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">))</span>
                    <span class="c1">#t.dot(10)                    </span>
                    
                    <span class="c1"># read the next line</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">fromLisp</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>                    

                <span class="n">proc</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
                <span class="n">t</span><span class="o">.</span><span class="n">ht</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

                
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">tkinter</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s2">&quot;Alert&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span>
                <span class="n">tb</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">raise</span> <span class="n">ex</span>
                
            
                
        <span class="k">def</span> <span class="nf">stop</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">fileMenu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>

        <span class="n">bar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;File&quot;</span><span class="p">,</span><span class="n">menu</span><span class="o">=</span><span class="n">fileMenu</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">menu</span><span class="o">=</span><span class="n">bar</span><span class="p">)</span>

        <span class="n">canvas</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">1300</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

        <span class="n">theTurtle</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">RawTurtle</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
        <span class="n">theTurtle</span><span class="o">.</span><span class="n">ht</span><span class="p">()</span>         

        <span class="n">sideBar</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">RAISED</span><span class="p">,</span> \
            <span class="n">borderwidth</span><span class="o">=</span><span class="s2">&quot;5pt&quot;</span><span class="p">)</span>
        <span class="n">sideBar</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;maze.txt&quot;</span><span class="p">)</span>
        
        <span class="n">selectLabel</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Select File&quot;</span><span class="p">)</span>
        <span class="n">selectLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        
        <span class="n">fileEntryBox</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">fileEntryBox</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
 
        <span class="n">selectLabel</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Select Search&quot;</span><span class="p">)</span>
        <span class="n">selectLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        
        <span class="n">RadioButtonBox</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">relief</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">SUNKEN</span><span class="p">,</span> \
            <span class="n">borderwidth</span><span class="o">=</span><span class="s2">&quot;5pt&quot;</span><span class="p">,</span><span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">RadioButtonBox</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">searchType</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">IntVar</span><span class="p">()</span>
        
        <span class="n">rb1</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Radiobutton</span><span class="p">(</span><span class="n">RadioButtonBox</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Depth First&quot;</span><span class="p">,</span> \
            <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">searchType</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rbSelection</span><span class="p">)</span>
        <span class="n">rb1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        
        <span class="n">rb2</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Radiobutton</span><span class="p">(</span><span class="n">RadioButtonBox</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Breadth First&quot;</span><span class="p">,</span> \
            <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">searchType</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rbSelection</span><span class="p">)</span>
        <span class="n">rb2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">rb3</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Radiobutton</span><span class="p">(</span><span class="n">RadioButtonBox</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Hill Climbing&quot;</span><span class="p">,</span> \
            <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">searchType</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rbSelection</span><span class="p">)</span>
        <span class="n">rb3</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        
        <span class="n">rb4</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Radiobutton</span><span class="p">(</span><span class="n">RadioButtonBox</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Best First&quot;</span><span class="p">,</span> \
            <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">searchType</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rbSelection</span><span class="p">)</span>
        <span class="n">rb4</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        
        <span class="n">rb5</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Radiobutton</span><span class="p">(</span><span class="n">RadioButtonBox</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;A Star&quot;</span><span class="p">,</span> \
            <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">searchType</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rbSelection</span><span class="p">)</span>
        <span class="n">rb5</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        
        <span class="n">sb</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Start&quot;</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">run</span><span class="p">)</span>
        <span class="n">sb</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        
        <span class="n">kb</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Stop&quot;</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">stop</span><span class="p">)</span>
        <span class="n">kb</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>   
        
    <span class="k">def</span> <span class="nf">rbSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchType</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;DFS Search&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;dfs&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchType</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;BFS Search&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;bfs&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchType</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Hill Climbing Search&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;hill&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchType</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Best First Search&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;best&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">searchType</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;A* Search&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;astar&quot;</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
    <span class="n">animApp</span> <span class="o">=</span> <span class="n">MazeAnimateApplication</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

    <span class="n">animApp</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Program Execution Completed.&quot;</span><span class="p">)</span>
    
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
    
    
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="n-queens-problem">
<h2>12.2. N-Queens Problem<a class="headerlink" href="#n-queens-problem" title="Permalink to this headline">¶</a></h2>
<p>The N-Queens problem from the text can be solved using a depth first search with forward checking. A front-end program is provided so you can visualize the search for a solution. You can <a class="reference download internal" download="" href="../_downloads/5978dfff6f87ce15f8be33f1c8a8280d/queensanimate.py"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a> the front-end code here.</p>
<p>The program is written as a front-end. Your challenge is to write the back-end code for this program. The architecture for your back-end is described at the top of the front-end code.
If you wish to visualize how this program works without writing your own back-end, you can <a class="reference download internal" download="" href="../_downloads/cd4474537efc233c6dd636f0d97a8c0a/qsearch.fas"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a> the qsearch.fas file here. This file requires CLISP be installed to run. The qsearch.fas file must be placed in the same directory as the front-end queensanimate.py program to run.</p>
<p>Here is the front-end code for your reference.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">tkinter</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># The following program will animate the n-queens algorithm. This front-end</span>
<span class="c1"># program and a back-end program communicate through pipes (both input and output)</span>
<span class="c1"># according to this architecture. When a command is sent to the back-end it is indicated </span>
<span class="c1"># with a right arrow indicating something is written to the back-end program&#39;s </span>
<span class="c1"># standard input. When the back-end program sends something to this front-end program</span>
<span class="c1"># it is indicated with a left arrow. That means it is written to the standard</span>
<span class="c1"># output of the back-end program. </span>

<span class="c1"># Each state in the search consists of the currently placed queens (up to the current </span>
<span class="c1"># row) and the remaining available locations above the row the last queen was placed in.</span>
<span class="c1"># The architecture below repeats this state information over and over until the search</span>
<span class="c1"># has found a solution. </span>

<span class="c1"># front-end   back-end</span>
<span class="c1">#   8 ---------&gt;       # A size is specified to the back-end program</span>
<span class="c1">#   &lt;----------- 0 10  # these are the row column pairs of possibly assigned queen locations</span>
<span class="c1">#   ...                # repeating until the search is complete</span>
<span class="c1">#   &lt;----------- and   # The and is printed between the assigned and remaining locations</span>
<span class="c1">#   &lt;----------- 1 2   # next comes the remaining locations</span>
<span class="c1">#   ...                # repeating until done</span>
<span class="c1">#   &lt;----------- done  # Then done is printed after each state is completely enumerated</span>
<span class="c1">#   ...                # These states repeat until the search has concluded. </span>
<span class="c1">#   &lt;----------- eof   # EOF is printed back to inidicate the end of the animation.</span>

<span class="c1"># If you wish to implement your own backend you must alter the line of code below</span>
<span class="c1"># that looks like this:</span>
<span class="c1">#</span>
<span class="c1"># proc = subprocess.Popen([&quot;clisp&quot;,&quot;qsearch.fas&quot;],stdout=subprocess.PIPE, \</span>
<span class="c1">#    stdin=subprocess.PIPE,universal_newlines=True)</span>
<span class="c1">#</span>
<span class="c1"># You must replace clisp with the program that starts your program running. If you</span>
<span class="c1"># have written your back-end with python 3.x then replace clisp with python3. </span>
<span class="c1"># The qsearch.fas should be replaced by any command-line arguments to your program. If </span>
<span class="c1"># you have written your program in python, then the argument should be the name of your</span>
<span class="c1"># program which must be in the same directory as this front-end code. </span>
<span class="c1">#</span>
<span class="c1"># Output that you want to print for debugging purposes can be written to standard error</span>
<span class="c1"># instead of standard output. In this way standard output can be used to communicate</span>
<span class="c1"># with the front-end while you still see output printed to the terminal window for </span>
<span class="c1"># debugging purposes. In python, standard error can be written to as follows:</span>
<span class="c1">#</span>
<span class="c1"># import sys</span>
<span class="c1"># sys.stderr.write(&#39;Your text goes here.\n&#39;)</span>
<span class="c1">#</span>
<span class="c1"># This architecture must be adhered to strictly for this program to work. Here</span>
<span class="c1"># is sample Lisp code that will handle this interaction.</span>

<span class="c1">#(defun queens-search (size)</span>
   <span class="c1">#(print-state (dfs (initialize size) #&#39;(lambda (state) (eq (list-length </span>
   <span class="c1">#                (first state)) size))))</span>
   <span class="c1">#(format t &quot;eof~%&quot;))</span>

<span class="c1">#(defun processCommand ()</span>
  <span class="c1">#(let ((size 8))</span>


    <span class="c1">#(setf size (parse-integer (read-line)))</span>
    <span class="c1">#(format *error-output* &quot;Lisp says - Size is ~D~%&quot;  size)</span>

    <span class="c1">#(queens-search size)))</span>


<span class="c1">#(processCommand)</span>



<span class="k">class</span> <span class="nc">QueensAnimateApplication</span><span class="p">(</span><span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buildWindow</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">buildWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Queens Search Animation&quot;</span><span class="p">)</span>

        <span class="n">bar</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span>
        <span class="n">fileMenu</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span><span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
                <span class="k">return</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">]</span>
                <span class="n">colorIndex</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">screen</span> <span class="o">=</span> <span class="n">theTurtle</span><span class="o">.</span><span class="n">getscreen</span><span class="p">()</span> 
                <span class="n">screen</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="n">screen</span><span class="o">.</span><span class="n">tracer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="n">screen</span>  
                <span class="n">size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sizevar</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="n">cellWidth</span> <span class="o">=</span> <span class="mi">800</span><span class="o">/</span><span class="n">size</span>
                <span class="n">screen</span><span class="o">.</span><span class="n">setworldcoordinates</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">800</span><span class="p">,</span><span class="mi">800</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">penup</span><span class="p">()</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">j</span><span class="o">*</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">i</span><span class="o">*</span><span class="n">cellWidth</span><span class="p">)</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">pendown</span><span class="p">()</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">fillcolor</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">colorIndex</span><span class="p">])</span>
                        <span class="n">colorIndex</span><span class="o">=</span><span class="p">(</span><span class="n">colorIndex</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">begin_fill</span><span class="p">()</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">j</span><span class="o">*</span><span class="n">cellWidth</span><span class="o">+</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">i</span><span class="o">*</span><span class="n">cellWidth</span><span class="p">)</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">j</span><span class="o">*</span><span class="n">cellWidth</span><span class="o">+</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">i</span><span class="o">*</span><span class="n">cellWidth</span><span class="o">+</span><span class="n">cellWidth</span><span class="p">)</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">j</span><span class="o">*</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">i</span><span class="o">*</span><span class="n">cellWidth</span><span class="o">+</span><span class="n">cellWidth</span><span class="p">)</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">j</span><span class="o">*</span><span class="n">cellWidth</span><span class="p">,</span><span class="n">i</span><span class="o">*</span><span class="n">cellWidth</span><span class="p">)</span>
                        <span class="n">theTurtle</span><span class="o">.</span><span class="n">end_fill</span><span class="p">()</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
                        <span class="n">colorIndex</span> <span class="o">=</span> <span class="p">(</span><span class="n">colorIndex</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">2</span>
                        
                <span class="n">screen</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                        
                <span class="n">matrix</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">screen</span><span class="o">.</span><span class="n">tracer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
                        <span class="n">t</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">RawTurtle</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
                        <span class="n">t</span><span class="o">.</span><span class="n">penup</span><span class="p">()</span>
                        <span class="n">t</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="s2">&quot;yellow&quot;</span><span class="p">)</span>
                        <span class="n">t</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">j</span><span class="o">*</span><span class="n">cellWidth</span><span class="o">+</span><span class="n">cellWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">i</span><span class="o">*</span><span class="n">cellWidth</span><span class="o">+</span><span class="n">cellWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
                        <span class="n">t</span><span class="o">.</span><span class="n">width</span><span class="p">(</span><span class="n">cellWidth</span><span class="p">)</span>
                        <span class="n">t</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
                        <span class="n">t</span><span class="o">.</span><span class="n">ht</span><span class="p">()</span>
                        <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                    <span class="n">matrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
                            
                <span class="n">screen</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                
                <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;clisp&quot;</span><span class="p">,</span><span class="s2">&quot;qsearch.fas&quot;</span><span class="p">],</span><span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> \
                    <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span><span class="n">universal_newlines</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="n">fromLisp</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdout</span>
                <span class="n">toLisp</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdin</span>
                <span class="n">toLisp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">size</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">toLisp</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
                
                <span class="n">line</span> <span class="o">=</span> <span class="n">fromLisp</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                
                <span class="k">while</span> <span class="n">line</span> <span class="o">!=</span> <span class="s2">&quot;eof&quot;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">running</span><span class="p">:</span>
                    <span class="c1"># process line of currently inspected node</span>
                    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
                            <span class="n">cell</span><span class="o">.</span><span class="n">ht</span><span class="p">()</span>
                            
                    <span class="k">while</span> <span class="n">line</span> <span class="o">!=</span> <span class="s2">&quot;and&quot;</span><span class="p">:</span>
                        
                        <span class="n">lst</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                        <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="s2">&quot;yellow&quot;</span><span class="p">)</span>
                        <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">st</span><span class="p">()</span>
                        
                        <span class="c1"># read the next line</span>
                        <span class="n">line</span> <span class="o">=</span> <span class="n">fromLisp</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        
                    <span class="n">line</span> <span class="o">=</span> <span class="n">fromLisp</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                    <span class="k">while</span> <span class="n">line</span> <span class="o">!=</span> <span class="s2">&quot;done&quot;</span><span class="p">:</span>
                        
                        <span class="n">lst</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                        <span class="n">row</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>
                        <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">st</span><span class="p">()</span>
                        
                        <span class="c1"># read the next line</span>
                        <span class="n">line</span> <span class="o">=</span> <span class="n">fromLisp</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                        
                    <span class="n">screen</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                    <span class="c1">#time.sleep(1)</span>
                    <span class="c1"># read the next line</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">fromLisp</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                 

                <span class="n">proc</span><span class="o">.</span><span class="n">kill</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

                
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">tkinter</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span><span class="s2">&quot;Alert&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span>
                <span class="n">tb</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">raise</span> <span class="n">ex</span>
                
            
                
        <span class="k">def</span> <span class="nf">stop</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">fileMenu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>

        <span class="n">bar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;File&quot;</span><span class="p">,</span><span class="n">menu</span><span class="o">=</span><span class="n">fileMenu</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">menu</span><span class="o">=</span><span class="n">bar</span><span class="p">)</span>

        <span class="n">canvas</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

        <span class="n">theTurtle</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">RawTurtle</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
        <span class="n">theTurtle</span><span class="o">.</span><span class="n">ht</span><span class="p">()</span>         

        <span class="n">sideBar</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">RAISED</span><span class="p">,</span> \
            <span class="n">borderwidth</span><span class="o">=</span><span class="s2">&quot;5pt&quot;</span><span class="p">)</span>
        <span class="n">sideBar</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">sizevar</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sizevar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;8&quot;</span><span class="p">)</span>
        
        <span class="n">selectLabel</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Problem Size&quot;</span><span class="p">)</span>
        <span class="n">selectLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        
        <span class="n">sizeEntryBox</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizevar</span><span class="p">)</span>
        <span class="n">sizeEntryBox</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        
        <span class="n">sb</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Start&quot;</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">run</span><span class="p">)</span>
        <span class="n">sb</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        
        <span class="n">kb</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Stop&quot;</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">stop</span><span class="p">)</span>
        <span class="n">kb</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>   

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
    <span class="n">animApp</span> <span class="o">=</span> <span class="n">QueensAnimateApplication</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

    <span class="n">animApp</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Program Execution Completed.&quot;</span><span class="p">)</span>
    
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
    
    
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="connect-four">
<h2>12.3. Connect Four<a class="headerlink" href="#connect-four" title="Permalink to this headline">¶</a></h2>
<p>The connect four game presented in the text, like the other two program presented here, is written as a front-end/back-end pair. The front-end code can be <a class="reference download internal" download="" href="../_downloads/39b36d0aa2a734a5dc4f9a355cde2d8b/c4.py"><code class="xref download docutils literal notranslate"><span class="pre">downloaded</span></code></a> here. The front-end requires the <a class="reference download internal" download="" href="../_downloads/e95cc319562c1959f8db1d9b67970f35/redchecker.gif"><code class="xref download docutils literal notranslate"><span class="pre">redchecker.gif</span></code></a> and the <a class="reference download internal" download="" href="../_downloads/b68bb82630d7276a155a230dfcd7f5af/blackchecker.gif"><code class="xref download docutils literal notranslate"><span class="pre">blackchecker</span></code></a> files be in the same directory.</p>
<p>Your challenge is to write the back-end code for this program that beats the author’s back-end code. The architecture for your back-end is described at the top of the front-end code.
If you wish to run this program works without writing your own back-end, you can <a class="reference download internal" download="" href="../_downloads/660a616884ec785dce47d01280bbe374/c4.fas"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a> the c4.fas file here. This file requires CLISP be installed to run. The c4.fas file must be placed in the same directory as the front-end c4.py program to run.</p>
<p>Here is the front-end code for your reference.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">turtle</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">tkinter</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># The following program will play connect four. This front-end</span>
<span class="c1"># program and a back-end program communicate through pipes (both input and output)</span>
<span class="c1"># according to this architecture. When a command is sent it is indicated </span>
<span class="c1"># with a right arrow indicating something is written to the other program&#39;s </span>
<span class="c1"># standard input. When the other program sends something to this Python Program</span>
<span class="c1"># it is indicated with a left arrow. That means it is written to the standard</span>
<span class="c1"># output of the other program. </span>

<span class="c1"># front-end   back-end      </span>
<span class="c1">#   0 -----------&gt;     # New Game is initiated by the front-end code</span>
<span class="c1">#   &lt;----------- 0     # Back-end code says OK.</span>
<span class="c1">#   2 M ---------&gt;     # Human Move followed by Move Value M which is 0-6.</span>
<span class="c1">#                      # Move Value M will be on separate line.</span>
<span class="c1">#   &lt;----------- 0     # Back-end code says OK.</span>
<span class="c1">#   1 -----------&gt;     # Computer Move is indicated to back-end code.</span>
<span class="c1">#   &lt;--------- 0 M     # Status OK and Move Value M which is 0-6.</span>
<span class="c1">#   3 -----------&gt;     # Game Over?</span>
<span class="c1">#   &lt;--------- Val     # Val is 0=Not Over, 1=Computer Won, 2=Human Won, 3=Tie.</span>

<span class="c1"># If you wish to implement your own back-end you must alter the line of code below</span>
<span class="c1"># that looks like this:</span>
<span class="c1">#</span>
<span class="c1"># proc = subprocess.Popen([&quot;clisp&quot;,&quot;c4.fas&quot;],stdout=subprocess.PIPE, \</span>
<span class="c1">#    stdin=subprocess.PIPE,universal_newlines=True)</span>
<span class="c1">#</span>
<span class="c1"># You must replace clisp with the program that starts your program running. If you</span>
<span class="c1"># have written your back-end with python 3.x then replace clisp with python3. </span>
<span class="c1"># The c4.fas should be replaced by any command-line arguments to your program. If </span>
<span class="c1"># you have written your program in python, then the argument should be the name of your</span>
<span class="c1"># program which must be in the same directory as this front-end code. </span>
<span class="c1">#</span>
<span class="c1"># Output that you want to print for debugging purposes can be written to standard error</span>
<span class="c1"># instead of standard output. In this way standard output can be used to communicate</span>
<span class="c1"># with the front-end while you still see output printed to the terminal window for </span>
<span class="c1"># debugging purposes. In python, standard error can be written to as follows:</span>
<span class="c1">#</span>
<span class="c1"># import sys</span>
<span class="c1"># sys.stderr.write(&#39;Your text goes here.\n&#39;)</span>
<span class="c1">#</span>
<span class="c1"># This architecture must be adhered to strictly for this program to work. Here</span>
<span class="c1"># is sample Lisp code that will handle this interaction. However, the other </span>
<span class="c1"># program may be written in any programming language, including Python.</span>

<span class="c1">#(defun play ()</span>
  <span class="c1">#(let ((gameBoard (make-hash-table :size 10))</span>
        <span class="c1">#(memo (make-hash-table :size 27 :test #&#39;equalp))</span>
        <span class="c1">#(lastMove nil))</span>

    <span class="c1">#(do () (nil nil)</span>
        <span class="c1">#;(printBoard gameBoard)</span>
        <span class="c1">#(let ((msgId (read)))</span>
          <span class="c1">#(cond ((equal msgId 2) ;; Human turn to call human turn function</span>
                 <span class="c1">#(setf lastMove (humanTurn gameBoard)))</span>

                <span class="c1">#((equal msgId 0) ;; New Game message</span>
                 <span class="c1">#(progn </span>
                   <span class="c1">#(setf gameBoard (make-hash-table :size 10))</span>
                   <span class="c1">#(setf memo (make-hash-table :size 27 :test #&#39;equalp))</span>
                   <span class="c1">#(format t &quot;0~%&quot;)))</span>
                   <span class="c1">#;; Return a 0 to indicate the computer is ready</span>

                <span class="c1">#((equal msgId 1) ;; Computer Turn message</span>
                 <span class="c1">#(setf lastMove (computerTurn gameBoard)))</span>
                
                <span class="c1">#((equal msgId 3) ;; Get Game Status</span>
                 
                 <span class="c1">#(cond ((equal (evalBoard gameBoard lastMove) 1) (format t &quot;1~%&quot;))</span>
                       <span class="c1">#;; The Computer Won</span>

                       <span class="c1">#((equal (evalBoard gameBoard lastMove) -1) (format t &quot;2~%&quot;))</span>
                       <span class="c1">#;; The Human Won</span>

                       <span class="c1">#((fullBoard gameBoard) (format t &quot;3~%&quot;))</span>
                       <span class="c1">#;; It&#39;s a draw</span>

                       <span class="c1">#(t (format t &quot;0~%&quot;))))</span>
                       <span class="c1">#;; The game is not over yet.</span>

                <span class="c1">#(t (format t &quot;-1~%&quot;)))))))</span>

<span class="n">Computer</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">Human</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<span class="k">class</span> <span class="nc">Tile</span><span class="p">(</span><span class="n">turtle</span><span class="o">.</span><span class="n">RawTurtle</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">canvas</span><span class="p">,</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">app</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">row</span> <span class="o">=</span> <span class="n">row</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">col</span> <span class="o">=</span> <span class="n">col</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tttApplication</span> <span class="o">=</span> <span class="n">app</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">penup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ht</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">col</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">50</span><span class="p">,</span><span class="n">row</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">50</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">setShape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">horc</span><span class="p">,</span><span class="n">screen</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">val</span> <span class="o">=</span> <span class="n">horc</span>
        
        <span class="k">if</span> <span class="n">horc</span> <span class="o">==</span> <span class="n">Computer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="s2">&quot;blackchecker.gif&quot;</span><span class="p">)</span> 
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="s2">&quot;redchecker.gif&quot;</span><span class="p">)</span> 
        
        <span class="bp">self</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">screen</span><span class="p">)</span> 

    <span class="k">def</span> <span class="nf">getOwner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">val</span>
    
    <span class="k">def</span> <span class="nf">clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">drop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">screen</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">50</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">tracer</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">st</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">50</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">55</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">50</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">45</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">50</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">row</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">50</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">tracer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Connect4Application</span><span class="p">(</span><span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>      
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buildWindow</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">buildWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Connect Four&quot;</span><span class="p">)</span>

        <span class="n">bar</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span>
        <span class="n">fileMenu</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span><span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                
        <span class="n">fileMenu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Exit&quot;</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">quit</span><span class="p">)</span>

        <span class="n">bar</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;File&quot;</span><span class="p">,</span><span class="n">menu</span><span class="o">=</span><span class="n">fileMenu</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">menu</span><span class="o">=</span><span class="n">bar</span><span class="p">)</span>

        <span class="n">canvas</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
        <span class="n">canvas</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">LEFT</span><span class="p">)</span>

        <span class="n">theTurtle</span> <span class="o">=</span> <span class="n">turtle</span><span class="o">.</span><span class="n">RawTurtle</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>
        <span class="n">theTurtle</span><span class="o">.</span><span class="n">ht</span><span class="p">()</span>  
        <span class="n">screen</span> <span class="o">=</span> <span class="n">theTurtle</span><span class="o">.</span><span class="n">getscreen</span><span class="p">()</span>  
        <span class="n">screen</span><span class="o">.</span><span class="n">setworldcoordinates</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">600</span><span class="p">,</span><span class="mi">700</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">register_shape</span><span class="p">(</span><span class="s2">&quot;blackchecker.gif&quot;</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">register_shape</span><span class="p">(</span><span class="s2">&quot;redchecker.gif&quot;</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">tracer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">bgcolor</span><span class="p">(</span><span class="s2">&quot;yellow&quot;</span><span class="p">)</span>
        
        <span class="n">theTurtle</span><span class="o">.</span><span class="n">width</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
            <span class="n">theTurtle</span><span class="o">.</span><span class="n">penup</span><span class="p">()</span>
            <span class="n">theTurtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">theTurtle</span><span class="o">.</span><span class="n">pendown</span><span class="p">()</span>
            <span class="n">theTurtle</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="mi">100</span><span class="o">+</span><span class="mi">100</span><span class="p">,</span><span class="mi">600</span><span class="p">)</span>
            
        <span class="n">theTurtle</span><span class="o">.</span><span class="n">ht</span><span class="p">()</span>
            
        <span class="n">screen</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        
        <span class="k">def</span> <span class="nf">checkStatus</span><span class="p">():</span>
            <span class="n">toOther</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;3</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">toOther</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            
            <span class="n">status</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fromOther</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            
            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">tkinter</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s2">&quot;Game Over&quot;</span><span class="p">,</span> <span class="s2">&quot;I Won!!!!!&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">tkinter</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s2">&quot;Game Over&quot;</span><span class="p">,</span> <span class="s2">&quot;You Won!!!!!&quot;</span><span class="p">)</span> 
            <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                 <span class="n">tkinter</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s2">&quot;Game Over&quot;</span><span class="p">,</span> <span class="s2">&quot;It&#39;s a tie.&quot;</span><span class="p">)</span>
                 
            <span class="c1">#print(&quot;Status is &quot;, status)</span>
            <span class="k">return</span> <span class="n">status</span>
        
        <span class="k">def</span> <span class="nf">ComputerTurn</span><span class="p">():</span>
            <span class="n">toOther</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">toOther</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="n">status</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fromOther</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="c1">#print(&quot;Computer Turn Other Status = &quot;, status)</span>
            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">move</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fromOther</span><span class="o">.</span><span class="n">readline</span><span class="p">())</span>
                <span class="c1">#print(&quot;Move is&quot;, move)</span>
                <span class="n">row</span> <span class="o">=</span> <span class="n">move</span> <span class="o">//</span> <span class="mi">7</span>
                <span class="n">col</span> <span class="o">=</span> <span class="n">move</span> <span class="o">%</span> <span class="mi">7</span>
                
                <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">setShape</span><span class="p">(</span><span class="n">Computer</span><span class="p">,</span><span class="n">screen</span><span class="p">)</span>
                <span class="n">screen</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">HumanTurn</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">running</span><span class="p">:</span> 
                <span class="k">return</span>
            
            <span class="c1">#status = checkStatus()</span>
            
            <span class="c1">#if status != 0:</span>
                <span class="c1">#return</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">col</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">//</span> <span class="mi">100</span>
            
            <span class="n">row</span> <span class="o">=</span> <span class="mi">5</span>
            <span class="k">while</span> <span class="n">row</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isvisible</span><span class="p">():</span>
                <span class="n">row</span> <span class="o">=</span> <span class="n">row</span> <span class="o">-</span> <span class="mi">1</span>
            
            <span class="k">if</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1">#Then we clicked in a column that was already full.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">return</span> 
              
            <span class="n">val</span> <span class="o">=</span> <span class="n">row</span> <span class="o">*</span> <span class="mi">7</span> <span class="o">+</span> <span class="n">col</span>
            
            <span class="c1"># Do the Human Turn</span>
            <span class="n">toOther</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;2</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">toOther</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="n">toOther</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">toOther</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            
            <span class="n">status</span> <span class="o">=</span> <span class="n">fromOther</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="c1">#print(&quot;Status is &quot;,status)</span>
            
            <span class="n">matrix</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">setShape</span><span class="p">(</span><span class="n">Human</span><span class="p">,</span><span class="n">screen</span><span class="p">)</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            
            <span class="c1"># Check the status of the game</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">checkStatus</span><span class="p">()</span>
            
            <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># Do a Computer Turn</span>
                <span class="n">ComputerTurn</span><span class="p">()</span>
                <span class="n">checkStatus</span><span class="p">()</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>
            
    
        <span class="n">matrix</span> <span class="o">=</span> <span class="p">[]</span>       
        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
            <span class="n">row</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">Tile</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
            <span class="n">matrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
            
        <span class="n">screen</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">screen</span><span class="o">.</span><span class="n">onclick</span><span class="p">(</span><span class="n">HumanTurn</span><span class="p">)</span>

        <span class="n">sideBar</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">RAISED</span><span class="p">,</span><span class="n">borderwidth</span><span class="o">=</span><span class="s2">&quot;5pt&quot;</span><span class="p">)</span>
        <span class="n">sideBar</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
        
        <span class="k">def</span> <span class="nf">NewGame</span><span class="p">():</span>
            <span class="n">toOther</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;0</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">toOther</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
            <span class="n">status</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fromOther</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>            
    
            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
                    <span class="n">token</span><span class="o">.</span><span class="n">ht</span><span class="p">()</span>
                    
            <span class="n">screen</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                    
        <span class="n">kb</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Pass&quot;</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">ComputerTurn</span><span class="p">)</span>
        <span class="n">kb</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>  
        
        <span class="n">ng</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">sideBar</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;New Game&quot;</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">NewGame</span><span class="p">)</span>
        <span class="n">ng</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>  
        
        
        <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;clisp&quot;</span><span class="p">,</span><span class="s2">&quot;c4.fas&quot;</span><span class="p">],</span><span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> \
            <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span><span class="n">universal_newlines</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">fromOther</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdout</span>
        <span class="n">toOther</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">stdin</span>   
        
        <span class="c1"># To write to the other program you should use commands like this</span>
        <span class="c1"># toOther.write(val+&quot;\n&quot;)</span>
        <span class="c1"># Don&#39;t forget to flush the buffer</span>
        <span class="c1"># toOther.flush()        </span>
        
        <span class="c1"># To read from the other program you write</span>
        <span class="c1"># line = fromOther.readline().strip()        </span>
        


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
    <span class="n">animApp</span> <span class="o">=</span> <span class="n">Connect4Application</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

    <span class="n">animApp</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Program Execution Completed.&quot;</span><span class="p">)</span>
    
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
    
    
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="figures-from-text">
<h2>12.4. Figures from Text<a class="headerlink" href="#figures-from-text" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id3">
<img alt="../_images/mazedfsannotated.png" src="../_images/mazedfsannotated.png" />
<p class="caption"><span class="caption-text">Fig. 1: Depth First Search of a Maze</span></p>
</div>
<div class="figure" id="id4">
<img alt="../_images/mazebfs.png" src="../_images/mazebfs.png" />
<p class="caption"><span class="caption-text">Fig. 2: Breadth First Search of a Maze</span></p>
</div>
<div class="figure" id="id5">
<img alt="../_images/mazehill.png" src="../_images/mazehill.png" />
<p class="caption"><span class="caption-text">Fig. 3: Hill Climbing Search of a Maze</span></p>
</div>
<div class="figure" id="id6">
<img alt="../_images/knighttour.png" src="../_images/knighttour.png" />
<p class="caption"><span class="caption-text">Fig. 4: A Closed 12 x 12 Knight’s Tour</span></p>
</div>
<div class="figure" id="id7">
<img alt="../_images/nqueens.png" src="../_images/nqueens.png" />
<p class="caption"><span class="caption-text">Fig. 5: A 25-Queens Solution</span></p>
</div>
<div class="figure" id="id8">
<img alt="../_images/mazebestfirst.png" src="../_images/mazebestfirst.png" />
<p class="caption"><span class="caption-text">Fig. 6: Best First Search of a Maze</span></p>
</div>
<div class="figure" id="id9">
<img alt="../_images/mazeastar.png" src="../_images/mazeastar.png" />
<p class="caption"><span class="caption-text">Fig. 7: A-Star Search of a Maze</span></p>
</div>
<div class="figure" id="id10">
<img alt="../_images/connect4.png" src="../_images/connect4.png" />
<p class="caption"><span class="caption-text">Fig. 8: The Connect Four Game</span></p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../chap1/chap1.html">1. Python Programming 101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap2/chap2.html">2. Computational Complexity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap3/chap3.html">3. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap4/chap4.html">4. Sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap5/chap5.html">5. Sets and Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap6/chap6.html">6. Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap7/chap7.html">7. Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap11/chap11.html">8. Membership Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap8/chap8.html">9. Heaps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap9/chap9.html">10. Balanced Binary Search Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap10/chap10.html">11. B-Trees</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">12. Heuristic Search</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#searching-mazes">12.1. Searching Mazes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#n-queens-problem">12.2. N-Queens Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connect-four">12.3. Connect Four</a></li>
<li class="toctree-l2"><a class="reference internal" href="#figures-from-text">12.4. Figures from Text</a></li>
</ul>
</li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="../chap10/chap10.html" title="11. B-Trees"
              >previous</a> |
            <a href="../genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="../_sources/chap12/chap12.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, Kent D. Lee and Steve Hubbard.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>