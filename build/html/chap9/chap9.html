
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>10. Balanced Binary Search Trees &#8212; Data Structures and Algorithms with Python</title>
    <link rel="stylesheet" href="../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="11. B-Trees" href="../chap10/chap10.html" />
    <link rel="prev" title="9. Heaps" href="../chap8/chap8.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
          <p class="logo"><a href="../index.html">
            <img class="logo" src="../_static/csbook.JPG" alt="Logo"/>
          </a></p>
        <div class="headertitle"><a
          href="../index.html">Data Structures and Algorithms with Python</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="../chap8/chap8.html" title="9. Heaps"
             accesskey="P">previous</a> |
          <a href="../chap10/chap10.html" title="11. B-Trees"
             accesskey="N">next</a> |
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="balanced-binary-search-trees">
<span id="balancedtreechap"></span><h1>10. Balanced Binary Search Trees<a class="headerlink" href="#balanced-binary-search-trees" title="Permalink to this headline">¶</a></h1>
<p>In <a class="reference internal" href="../chap6/chap6.html#chap6">chapter 6</a> binary search trees were defined along with a recursive insert algorithm. The discussion of binary search trees pointed out they have problems in some cases. Binary search trees can become unbalanced, actually quite often. When a tree is unbalanced the complexity of insert, delete, and lookup operations can get as bad as <img class="math" src="../_images/math/c214e0e00a1477cb92578e7f3ba2eab8bb9041aa.png" alt="\Theta(n)"/>. This problem with unbalanced binary search trees was the motivation for the development of height-balanced AVL trees by G. M. Adelson-Velskii and E. M. Landis, two Soviet computer scientists, in 1962. AVL trees were named for these two inventors. Their paper on AVL trees <a href="#id1"><span class="problematic" id="id2">:cite:`avltrees`</span></a> described the first algorithm for maintaining balanced binary search trees. The chapter goes on to discuss Splay Trees as another example of balanced binary search trees.</p>
<div class="section" id="avl-tree-implementations">
<h2>10.1. AVL Tree Implementations<a class="headerlink" href="#avl-tree-implementations" title="Permalink to this headline">¶</a></h2>
<p>AVL trees maintain their own balance. The balance can be maintained in one of two ways. Either the height of each node in the tree can be maintained or the balance of each node in the tree can be maintained. If maintaining the height, there is a little more work to be done to adjust heights all the way up the tree. If balance is maintained then the code gets a little trickier, but there balances only need to be adjusted up to a pivot node.</p>
<p>In addition, AVL trees can be implemented with recursive or iterative <em>insert</em> and <em>delete</em> methods. Both are described in the text.</p>
<div class="section" id="iteratively-implemented-avl-tree">
<h3>10.1.1. Iteratively Implemented AVL Tree<a class="headerlink" href="#iteratively-implemented-avl-tree" title="Permalink to this headline">¶</a></h3>
<p>You can <a class="reference download internal" download="" href="../_downloads/1422cbda1ba61c4ff1d905bd9932d93e/avltree.py"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a> avltree.py to work on an iterative implementation of AVL Trees.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">  File:  avltree.py</span>
<span class="sd">  Author: Steve Hubbard,  and</span>
<span class="sd">  Date:</span>
<span class="sd">  Description:  This module provides the AVLNode and AVLTree classes.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">from</span> <span class="nn">stack</span> <span class="kn">import</span> <span class="n">Stack</span>

<span class="k">class</span> <span class="nc">AVLNode</span><span class="p">:</span>
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">item</span> <span class="o">=</span> <span class="n">item</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="bp">None</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="bp">None</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="n">balance</span>

   <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  This performs an inorder traversal of the tree rooted at self,</span>
<span class="sd">         using recursion.  Return the corresponding string.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="n">st</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">balance</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
         <span class="n">st</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">+</span>  <span class="n">st</span>  <span class="c1"># A recursive call: str(self.left)</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
         <span class="n">st</span> <span class="o">=</span> <span class="n">st</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">)</span>  <span class="c1"># Another recursive call</span>
      <span class="k">return</span> <span class="n">st</span>

   <span class="k">def</span> <span class="nf">rotateLeft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  Perform a left rotation of the subtree rooted at the</span>
<span class="sd">       receiver.  Answer the root node of the new subtree.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">child</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
         <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;Error!  No right child in rotateLeft.&#39;</span> <span class="p">)</span>
         <span class="k">return</span> <span class="bp">None</span>  <span class="c1"># redundant</span>
      <span class="k">else</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">left</span>
         <span class="n">child</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="bp">self</span>
         <span class="k">return</span> <span class="n">child</span>

   <span class="k">def</span> <span class="nf">rotateRight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  Perform a right rotation of the subtree rooted at the</span>
<span class="sd">       receiver.  Answer the root node of the new subtree.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">child</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
         <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;Error!  No left child in rotateRight.&#39;</span> <span class="p">)</span>
         <span class="k">return</span> <span class="bp">None</span>  <span class="c1"># redundant</span>
      <span class="k">else</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">right</span>
         <span class="n">child</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="bp">self</span>
         <span class="k">return</span> <span class="n">child</span>

   <span class="k">def</span> <span class="nf">rotateRightThenLeft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;Perform a double inside left rotation at the receiver.  We</span>
<span class="sd">       assume the receiver has a right child (the bad child), which has a left</span>
<span class="sd">       child. We rotate right at the bad child then rotate left at the pivot</span>
<span class="sd">       node, self. Answer the root node of the new subtree.  We call this</span>
<span class="sd">       case 3, subcase 2.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">pass</span>

   <span class="k">def</span> <span class="nf">rotateLeftThenRight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;Perform a double inside right rotation at the receiver.  We</span>
<span class="sd">       assume the receiver has a left child (the bad child) which has a right</span>
<span class="sd">       child. We rotate left at the bad child, then rotate right at</span>
<span class="sd">       the pivot, self.  Answer the root node of the new subtree. We call this</span>
<span class="sd">       case 3, subcase 2.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">pass</span>

<span class="k">class</span> <span class="nc">AVLTree</span><span class="p">:</span>
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">None</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

   <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="n">st</span> <span class="o">=</span> <span class="s1">&#39;There are &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; nodes in the AVL tree.</span><span class="se">\n</span><span class="s1">&#39;</span>
      <span class="k">return</span>  <span class="n">st</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>  <span class="c1"># Using the string hook for AVL nodes</span>

   <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newItem</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  Add a new node with item newItem, if there is not a match in the</span>
<span class="sd">        tree.  Perform any rotations necessary to maintain the AVL tree,</span>
<span class="sd">        including any needed updates to the balances of the nodes.  Most of the</span>
<span class="sd">        actual work is done by other methods.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">pass</span>

   <span class="k">def</span> <span class="nf">adjustBalances</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theStack</span><span class="p">,</span> <span class="n">pivot</span><span class="p">,</span> <span class="n">newItem</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  We adjust the balances of all the nodes in theStack, up to and</span>
<span class="sd">         including the pivot node, if any.  Later rotations may cause</span>
<span class="sd">         some of the balances to change.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">pass</span>

   <span class="k">def</span> <span class="nf">case1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theStack</span><span class="p">,</span> <span class="n">pivot</span><span class="p">,</span> <span class="n">newItem</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  There is no pivot node.  Adjust the balances of all the nodes</span>
<span class="sd">         in theStack.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">adjustBalances</span><span class="p">(</span><span class="n">theStack</span><span class="p">,</span> <span class="n">pivot</span><span class="p">,</span> <span class="n">newItem</span><span class="p">)</span>

   <span class="k">def</span> <span class="nf">case2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theStack</span><span class="p">,</span> <span class="n">pivot</span><span class="p">,</span> <span class="n">newItem</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39; The pivot node exists.  We have inserted a new node into the</span>
<span class="sd">         subtree of the pivot of smaller height.  Hence, we need to adjust</span>
<span class="sd">         the balances of all the nodes in the stack up to and including</span>
<span class="sd">         that of the pivot node.  No rotations are needed.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">adjustBalances</span><span class="p">(</span><span class="n">theStack</span><span class="p">,</span> <span class="n">pivot</span><span class="p">,</span> <span class="n">newItem</span><span class="p">)</span>

   <span class="k">def</span> <span class="nf">case3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">theStack</span><span class="p">,</span> <span class="n">pivot</span><span class="p">,</span> <span class="n">newItem</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  The pivot node exists.  We have inserted a new node into the</span>
<span class="sd">         larger height subtree of the pivot node.  Hence rebalancing and</span>
<span class="sd">         rotations are needed.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">adjustBalances</span><span class="p">(</span><span class="n">theStack</span><span class="p">,</span> <span class="n">pivot</span><span class="p">,</span> <span class="n">newItem</span><span class="p">)</span>
      <span class="c1"># Lots more!!!!</span>

   <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newItem</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  The AVL tree is not empty.  We search for newItem. This method will</span>
<span class="sd">        return a tuple: (pivot, theStack, parent, found).</span>
<span class="sd">        In this tuple, if there is a pivot node, we return a reference to it</span>
<span class="sd">        (or None). We create a stack of nodes along the search path -- theStack.</span>
<span class="sd">        We indicate whether or not we found an item which matches newItem.  We</span>
<span class="sd">        also return a reference to the last node the search examined -- referred</span>
<span class="sd">        to here as the parent.  (Note that if we find an object, the parent is</span>
<span class="sd">        reference to that matching node.)  If there is no match, parent is a</span>
<span class="sd">        reference to the node used to add a child in insert().</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">pass</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
   <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Our names are &quot;</span><span class="p">)</span>
   <span class="k">print</span><span class="p">()</span>
   <span class="n">a</span> <span class="o">=</span> <span class="n">AVLNode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">AVLNode</span><span class="p">(</span> <span class="mi">30</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">AVLNode</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>
   <span class="n">d</span> <span class="o">=</span> <span class="n">AVLNode</span><span class="p">(</span><span class="mi">290</span><span class="p">)</span>
   <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">   print(a)</span>
<span class="sd">   print(b)</span>
<span class="sd">   &#39;&#39;&#39;</span>
   <span class="n">t</span> <span class="o">=</span> <span class="n">AVLTree</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">b</span>
   <span class="n">b</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">a</span>
   <span class="n">a</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">c</span>
   <span class="n">b</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">d</span>
   <span class="n">t</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">4</span>
   <span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

   <span class="n">a</span> <span class="o">=</span> <span class="n">AVLNode</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">AVLNode</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">AVLNode</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
   <span class="n">a</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">b</span>
   <span class="n">b</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">c</span>
   <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Testing rotateLeftThenRight()&quot;</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">rotateLeftThenRight</span><span class="p">())</span>

   <span class="p">(</span><span class="n">pivot</span><span class="p">,</span> <span class="n">theStack</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">found</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="o">-</span><span class="mi">70</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="n">pivot</span><span class="o">.</span><span class="n">item</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">item</span><span class="p">,</span> <span class="n">found</span><span class="p">)</span>
   <span class="k">print</span><span class="p">()</span>
   <span class="k">print</span><span class="p">(</span><span class="s2">&quot;The items in the nodes of the stack are: &quot;</span><span class="p">)</span>
   <span class="k">while</span> <span class="ow">not</span> <span class="n">theStack</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">():</span>
      <span class="n">current</span> <span class="o">=</span> <span class="n">theStack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
      <span class="k">print</span><span class="p">(</span><span class="n">current</span><span class="o">.</span><span class="n">item</span><span class="p">)</span>
   <span class="k">print</span><span class="p">()</span>

   <span class="p">(</span><span class="n">pivot</span><span class="p">,</span> <span class="n">theStack</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">found</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="n">pivot</span><span class="o">.</span><span class="n">item</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">item</span><span class="p">,</span> <span class="n">found</span><span class="p">)</span>

   <span class="p">(</span><span class="n">pivot</span><span class="p">,</span> <span class="n">theStack</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">found</span><span class="p">)</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="n">pivot</span><span class="o">.</span><span class="n">item</span><span class="p">,</span> <span class="n">parent</span><span class="o">.</span><span class="n">item</span><span class="p">,</span> <span class="n">found</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> <span class="n">main</span><span class="p">()</span>
<span class="sd">&#39;&#39;&#39;  The output from main():</span>
<span class="sd">[evaluate avltree.py]</span>
<span class="sd">Our names are</span>
<span class="sd">There are 4 nodes in the AVL tree.</span>
<span class="sd">-100 0</span>
<span class="sd">20 -1</span>
<span class="sd">30 -1</span>
<span class="sd">290 0</span>

<span class="sd">Testing rotateLeftThenRight()</span>
<span class="sd">30 0</span>
<span class="sd">40 0</span>
<span class="sd">50 0</span>

<span class="sd">20 -100 False</span>

<span class="sd">The items in the nodes of the stack are:</span>
<span class="sd">-100</span>
<span class="sd">20</span>
<span class="sd">30</span>

<span class="sd">20 20 False</span>
<span class="sd">20 -100 True</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="recursively-implemented-avl-tree">
<h3>10.1.2. Recursively Implemented AVL Tree<a class="headerlink" href="#recursively-implemented-avl-tree" title="Permalink to this headline">¶</a></h3>
<p>AVL trees may also be implemented recursively meaning that the insert and delete methods can be written recursively. The outline of this implementation can be seen in the text. It is relatively short and is not provided for download.</p>
</div>
</div>
<div class="section" id="splay-tree-implementations">
<h2>10.2. Splay Tree Implementations<a class="headerlink" href="#splay-tree-implementations" title="Permalink to this headline">¶</a></h2>
<p>Splay trees do not maintain the balance or height. Instead they rely on rotations that always rotate a inserted or accessed element to the root of the tree. In doing this they maintain a balance in the tree, often exploiting spatial locality. Again, splay trees may be implemented recursively or iteratively.</p>
<div class="section" id="iteratively-implemented-splay-tree">
<h3>10.2.1. Iteratively Implemented Splay Tree<a class="headerlink" href="#iteratively-implemented-splay-tree" title="Permalink to this headline">¶</a></h3>
<p>You can <a class="reference download internal" download="" href="../_downloads/60a5f54e7d35af1c898c8fb641f4e861/splaytree.py"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a> splaytree.py to work on an iterative implementation of splay trees. To run this program you will need to <a class="reference download internal" download="" href="../_downloads/c4f42cb930305ee63fecb2bd201b4bd8/stack.py"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a> stack.py module and you’ll need to <a class="reference download internal" download="" href="../_downloads/dd58e147030eba403ee88a82bdc03ad3/person.py"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a> person.py module.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd"> File: splaytree.py</span>
<span class="sd"> Author(s): Steve Hubbard and </span>
<span class="sd"> Date: 9/17/13</span>
<span class="sd"> Description: This module implements the SplayTree class and the</span>
<span class="sd">   SplayNode class.  The classes use bottom up splaying rather than </span>
<span class="sd">   top down splaying.  We do not allow duplicate objects in the tree.</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="kn">from</span> <span class="nn">person</span> <span class="kn">import</span> <span class="n">Person</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">stack</span> <span class="kn">import</span> <span class="n">Stack</span>

<span class="k">class</span> <span class="nc">SplayNode</span><span class="p">:</span>
   <span class="sd">&#39;&#39;&#39; This module implements the SplayNode class. This</span>
<span class="sd">     class in turn is used by the SplayTree class.  The classes</span>
<span class="sd">     use bottom up splaying rather than top down splaying.  We</span>
<span class="sd">     do not allow duplicate objects in the tree.</span>
<span class="sd">   &#39;&#39;&#39;</span>
   
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">left</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">item</span> <span class="o">=</span> <span class="n">item</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>

   <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
      <span class="n">st</span> <span class="o">=</span> <span class="s1">&#39;(&#39;</span>
      <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
         <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;*&#39;</span>
      <span class="k">else</span><span class="p">:</span>
         <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="c1"># recursion</span>
      <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
         <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;*&#39;</span>
      <span class="k">else</span><span class="p">:</span>
         <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">)</span> <span class="c1"># recursion</span>
      <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;)&#39;</span>
      <span class="k">return</span> <span class="n">st</span>
   
   <span class="k">def</span> <span class="nf">inorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39; Perform an inorder traversal of the subtree rooted at</span>
<span class="sd">        the receiver.  Print each item in this subtree during</span>
<span class="sd">        the traversal.  This is done with recursion.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">pass</span>
      
   <span class="k">def</span> <span class="nf">insertInNode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anItem</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39; Try to insert a copy of anItem into the bottom up splay</span>
<span class="sd">       tree rooted at the receiver.  If anItem is already in the tree,</span>
<span class="sd">       do not insert an extra copy. In any case, splay the new node,</span>
<span class="sd">       or the last node on the search path, to the root.  The method</span>
<span class="sd">       will answer a tuple.  The first element is True or False</span>
<span class="sd">       according to whether a new element was added or not.  The</span>
<span class="sd">       second element is the new root node.</span>
<span class="sd">       &#39;&#39;&#39;</span>
       <span class="k">pass</span>
   
   <span class="k">def</span> <span class="nf">rotateLeft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  Perform a left rotation of the subtree rooted at the</span>
<span class="sd">       receiver.  Answer the root node of the new subtree.  </span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="n">child</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">child</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
         <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;Error!  No right child in rotateLeft. &#39;</span> <span class="p">)</span>
         <span class="k">return</span> <span class="bp">None</span>  <span class="c1"># redundant</span>
      <span class="k">else</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">left</span>
         <span class="n">child</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="bp">self</span>
         <span class="k">return</span> <span class="n">child</span>

   <span class="k">def</span> <span class="nf">splayToRoot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stack</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  Perform a bottom up splay beginning at the node at the</span>
<span class="sd">       top of the stack.  Answer the root of the new tree.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">pass</span>
      
   <span class="sd">&#39;&#39;&#39;  Many more methods! &#39;&#39;&#39;</span>
      

<span class="k">class</span> <span class="nc">SplayTree</span><span class="p">:</span>
   
   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">None</span>

   <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
         <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
         <span class="k">return</span> <span class="s2">&quot;&quot;</span>
   
   <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anItem</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39;  Atempt to find a match (==) for anItem in the receiver.</span>
<span class="sd">      If found, splay the corresponding node to the root and answer</span>
<span class="sd">      the item of the node. If not found, splay the last node on</span>
<span class="sd">      the search path to the root. In this case, answer None.  If</span>
<span class="sd">      found, we remove the node and make the largest element of the</span>
<span class="sd">      new left subtree (from the splaying of the node to the root</span>
<span class="sd">      position) the new root node of the tree.  Of course finding</span>
<span class="sd">      the largest element uses a splaying on that left subtree.</span>
<span class="sd">      If there is no left subtree, the right subtree becomes the</span>
<span class="sd">      root.  This may leave us with an empty tree.  If found,</span>
<span class="sd">      decrement the size of the tree and answer the item deleted.</span>
<span class="sd">      If not found, answer None.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">pass</span>

   <span class="k">def</span> <span class="nf">findMax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39; Find the largest element in the splay tree.  Splay that</span>
<span class="sd">      element to the root.  Answer a deep copy of the element.</span>
<span class="sd">      If the tree is empty, answer None.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">pass</span> 

   <span class="k">def</span> <span class="nf">findMin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39; Find the smallest element in the splay tree.  Splay that</span>
<span class="sd">      element to the root.  Answer a deep copy of the element.  If</span>
<span class="sd">      the tree is empty, answer None.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
         <span class="k">return</span> <span class="bp">None</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">findMin</span><span class="p">()</span>
      <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">getItem</span><span class="p">())</span>

   <span class="k">def</span> <span class="nf">getSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span>

   <span class="k">def</span> <span class="nf">inorder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39; Print the contents of the receiver, in inorder.</span>
<span class="sd">        Print one item per line.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">inorder</span><span class="p">()</span>

   <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anItem</span><span class="p">):</span>
      <span class="sd">&#39;&#39;&#39; Insert a deep copy of anItem into the bottom up splay tree.</span>
<span class="sd">      If anItem is already present in the tree, do not insert a new </span>
<span class="sd">      copy of anItem.  If anItem is added, increment the size of</span>
<span class="sd">      the receiver.  In either case, we splay from</span>
<span class="sd">      the last node.  If anItem was added, answer anItem.  If not,</span>
<span class="sd">      answer None.</span>
<span class="sd">      &#39;&#39;&#39;</span>
      <span class="k">pass</span>
         
   <span class="k">def</span> <span class="nf">retrieve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anItem</span><span class="p">):</span>
      <span class="k">pass</span>

   <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anItem</span><span class="p">):</span>
      <span class="k">pass</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
   
   <span class="k">print</span><span class="p">(</span><span class="s1">&#39;My name is &#39;</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Test the SplayNode class: &#39;</span><span class="p">)</span>
   
   <span class="n">a</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">45</span><span class="p">))</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">rotateLeft</span><span class="p">()</span>
   <span class="k">print</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;((((*10*)20(*25*))30(*35*))40(*45*))&#39;</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span>

   <span class="n">a</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">45</span><span class="p">))</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">rotateRight</span><span class="p">()</span>
   <span class="k">print</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;((*10*)20((*25*)30((*35*)40(*45*))))&#39;</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span>
   
   <span class="n">a</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">45</span><span class="p">))</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
   <span class="n">d</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">55</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">65</span><span class="p">))</span>
   <span class="n">e</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
   <span class="n">f</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
   <span class="n">root</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="n">root</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span>

   <span class="n">a</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">45</span><span class="p">))</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
   <span class="n">d</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">55</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">65</span><span class="p">))</span>
   <span class="n">e</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
   <span class="n">f</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
   <span class="n">root</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">rotateRightThenLeft</span><span class="p">()</span>
   <span class="k">print</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span>  \
   <span class="s1">&#39;(((((*10*)20(*25*))30((*35*)40(*45*)))50(*55*))60((*65*)70((*80*)90(*100*))))&#39;</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span>

   <span class="n">a</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">45</span><span class="p">))</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
   <span class="n">d</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">55</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">65</span><span class="p">))</span>
   <span class="n">e</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
   <span class="n">f</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
   <span class="n">root</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">rotateLeftThenRight</span><span class="p">()</span>
   <span class="k">print</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span>  \
   <span class="s1">&#39;((((*10*)20(*25*))30(*35*))40((*45*)50(((*55*)60(*65*))70((*80*)90(*100*)))))&#39;</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span>

   <span class="n">a</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">45</span><span class="p">))</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
   <span class="n">d</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">55</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">65</span><span class="p">))</span>
   <span class="n">e</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
   <span class="n">f</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
   <span class="n">root</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">doubleRotateLeft</span><span class="p">()</span>
   <span class="k">print</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span>  \
   <span class="s1">&#39;((((((*10*)20(*25*))30((*35*)40(*45*)))50((*55*)60(*65*)))70(*80*))90(*100*))&#39;</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span>
   
   <span class="n">a</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">45</span><span class="p">))</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
   <span class="n">d</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">55</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">65</span><span class="p">))</span>
   <span class="n">e</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
   <span class="n">f</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
   <span class="n">root</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">doubleRotateRight</span><span class="p">()</span>
   <span class="k">print</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> \
   <span class="s1">&#39;((*10*)20((*25*)30(((*35*)40(*45*))50(((*55*)60(*65*))70((*80*)90(*100*))))))&#39;</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span>
   
   <span class="n">a</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span>
   <span class="n">b</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">35</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">45</span><span class="p">))</span>
   <span class="n">c</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
   <span class="n">d</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">55</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">65</span><span class="p">))</span>
   <span class="n">e</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">80</span><span class="p">),</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
   <span class="n">f</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
   <span class="n">root</span> <span class="o">=</span> <span class="n">SplayNode</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">35</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> \
   <span class="s1">&#39;((((*10*)20(*25*))30*)35((*40(*45*))50(((*55*)60(*65*))70((*80*)90(*100*)))))&#39;</span><span class="p">)</span>

   <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Test the SplayTree class: &#39;</span><span class="p">)</span>
   <span class="n">t</span> <span class="o">=</span> <span class="n">SplayTree</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;(*1(((*2(*3*))4(*5*))6(*7*)))&#39;</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;The size of the tree is &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">getSize</span><span class="p">())</span> <span class="p">)</span>
   
   <span class="n">t</span> <span class="o">=</span> <span class="n">SplayTree</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">findMin</span><span class="p">()</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span>  <span class="s1">&#39;(*1(((*2(*3*))4(*5*))6(*7*)))&#39;</span><span class="p">)</span>
   
   <span class="n">t</span> <span class="o">=</span> <span class="n">SplayTree</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span>  <span class="s1">&#39;((*1*)2((*4(*5*))6(*7*)))&#39;</span> <span class="p">)</span>
   
   <span class="n">t</span> <span class="o">=</span> <span class="n">SplayTree</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">findMax</span><span class="p">()</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;((((*1*)2(*4(*5*)))6*)7*)&#39;</span><span class="p">)</span>

   <span class="n">t</span> <span class="o">=</span> <span class="n">SplayTree</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Jill&#39;</span><span class="p">,</span><span class="mi">35</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Jon&#39;</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Jack&#39;</span><span class="p">,</span><span class="mi">25</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">,</span><span class="mi">30</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Jud&#39;</span><span class="p">,</span><span class="mi">95</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Joey&#39;</span><span class="p">,</span><span class="mi">27</span><span class="p">))</span>
   <span class="n">st</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
   <span class="n">t</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span>
   <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>
   <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
   <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">))</span>
   <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
   <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">findMax</span><span class="p">()</span>
   <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
   <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
   <span class="k">print</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>

   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;The size of the tree is &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">getSize</span><span class="p">())</span> <span class="p">)</span>

   <span class="n">t</span> <span class="o">=</span> <span class="n">SplayTree</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">3.5</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;((((*1*)2*)3*)3.5(((*4*)5(*6*))7*))&#39;</span> <span class="p">)</span>
   
   <span class="n">t</span> <span class="o">=</span> <span class="n">SplayTree</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">3.5</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mf">3.5</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;(((*1*)2*)3(((*4*)5(*6*))7*))&#39;</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;The size of the tree is &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">getSize</span><span class="p">())</span> <span class="p">)</span>
   

   <span class="n">t</span> <span class="o">=</span> <span class="n">SplayTree</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="n">t</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span> <span class="s1">&#39;The size of the tree is &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">getSize</span><span class="p">())</span> <span class="p">)</span>

   <span class="n">t</span> <span class="o">=</span> <span class="n">SplayTree</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Joe&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Jill&#39;</span><span class="p">,</span><span class="mi">35</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Jon&#39;</span><span class="p">,</span><span class="mi">15</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Jack&#39;</span><span class="p">,</span><span class="mi">25</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">,</span><span class="mi">30</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Jud&#39;</span><span class="p">,</span><span class="mi">95</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s1">&#39;Joey&#39;</span><span class="p">,</span><span class="mi">27</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">inorder</span><span class="p">()</span>
      
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> <span class="n">main</span><span class="p">()</span>

<span class="sd">&#39;&#39;&#39; Output, from splaytree.py, wrapped around!</span>
<span class="sd">[evaluate splaytree.py]</span>
<span class="sd">My name is </span>
<span class="sd">Test the SplayNode class: </span>
<span class="sd">((((*10*)20(*25*))30(*35*))40(*45*))</span>
<span class="sd">True</span>

<span class="sd">((*10*)20((*25*)30((*35*)40(*45*))))</span>
<span class="sd">True</span>

<span class="sd">((((*10*)20(*25*))30((*35*)40(*45*)))50(((*55*)60(*65*))70((*80*)90(*100*))))</span>

<span class="sd">(((((*10*)20(*25*))30((*35*)40(*45*)))50(*55*))60((*65*)70((*80*)90(*100*))))</span>
<span class="sd">True</span>

<span class="sd">((((*10*)20(*25*))30(*35*))40((*45*)50(((*55*)60(*65*))70((*80*)90(*100*)))))</span>
<span class="sd">True</span>

<span class="sd">((((((*10*)20(*25*))30((*35*)40(*45*)))50((*55*)60(*65*)))70(*80*))90(*100*))</span>
<span class="sd">True</span>

<span class="sd">((*10*)20((*25*)30(((*35*)40(*45*))50(((*55*)60(*65*))70((*80*)90(*100*))))))</span>
<span class="sd">True</span>

<span class="sd">((((*10*)20(*25*))30*)35((*40(*45*))50(((*55*)60(*65*))70((*80*)90(*100*)))))</span>
<span class="sd">True</span>
<span class="sd">Test the SplayTree class: </span>
<span class="sd">True</span>
<span class="sd">The size of the tree is 7</span>
<span class="sd">True</span>
<span class="sd">True</span>
<span class="sd">True</span>
<span class="sd">((((*Name: Jon Id: 15 (*Name: James Id: 25 *))Name: Joey Id: 27 *)</span>
<span class="sd">                                   Name: John Id: 30 *)Name: Jud Id: 95 *)</span>
<span class="sd">The size of the tree is 5</span>
<span class="sd">True</span>
<span class="sd">True</span>
<span class="sd">The size of the tree is 7</span>
<span class="sd">The size of the tree is 2</span>
<span class="sd">Name: Jon Id: 15 </span>
<span class="sd">Name: Joe Id: 25 </span>
<span class="sd">Name: Joey Id: 27 </span>
<span class="sd">Name: John Id: 30 </span>
<span class="sd">Name: Jill Id: 35 </span>
<span class="sd">Name: Jud Id: 95 </span>

<span class="sd">&#39;&#39;&#39;</span>
   
      
   
      
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="recursively-implemented-splay-tree">
<h3>10.2.2. Recursively Implemented Splay Tree<a class="headerlink" href="#recursively-implemented-splay-tree" title="Permalink to this headline">¶</a></h3>
<p>A recursive implementation of splay trees relies on keeping track of the left or right double rotations as the recursive insert or lookup returns up the tree. To accomplish this you must call a rotate function. Calling <em>rotate[“RL”](pivot)</em> would call the rotate right then left double rotation. The <em>rotate</em> variable is a dictionary (i.e. hash table) in the code provided here.</p>
<p>You can <a class="reference download internal" download="" href="../_downloads/4454b2e5cfa8d6e4c87aae6010a0bd0d/splay.py"><code class="xref download docutils literal notranslate"><span class="pre">download</span></code></a> splay.py file to begin working on the recursive splay tree implementation.</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd"> File: splay.py</span>
<span class="sd"> Author: Kent D. Lee</span>
<span class="sd"> Date: 8/21/2014</span>
<span class="sd"> Description: This module implements the SplayTree class. This</span>
<span class="sd">   class uses the SplayNode class.  The classes</span>
<span class="sd">   use bottom up splaying rather than top down splaying.  We</span>
<span class="sd">   do not allow duplicate objects in the tree.</span>

<span class="sd">   Delete is not implemented in this file currently. Test code</span>
<span class="sd">   should be added to thoroughly test insert, lookup, and delete. </span>
<span class="sd">   Recall that looking up a value rotates it to the root. Deleting </span>
<span class="sd">   an item rotates its parent to the root. </span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="k">def</span> <span class="nf">rotateLeft</span><span class="p">(</span><span class="n">pivot</span><span class="p">):</span>
   <span class="k">pass</span>

<span class="k">def</span> <span class="nf">rotateRight</span><span class="p">(</span><span class="n">pivot</span><span class="p">):</span>
   <span class="k">pass</span>

<span class="k">def</span> <span class="nf">rotateRL</span><span class="p">(</span><span class="n">pivot</span><span class="p">):</span>
   <span class="k">pass</span>

<span class="k">def</span> <span class="nf">rotateLR</span><span class="p">(</span><span class="n">pivot</span><span class="p">):</span>
   <span class="k">pass</span>

<span class="k">def</span> <span class="nf">rotateRR</span><span class="p">(</span><span class="n">pivot</span><span class="p">):</span>
   <span class="k">pass</span>

<span class="k">def</span> <span class="nf">rotateLL</span><span class="p">(</span><span class="n">pivot</span><span class="p">):</span>
   <span class="k">pass</span>

<span class="n">rotate</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">rotate</span><span class="p">[</span><span class="s2">&quot;RL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rotateRL</span>
<span class="n">rotate</span><span class="p">[</span><span class="s2">&quot;LR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rotateLR</span>
<span class="n">rotate</span><span class="p">[</span><span class="s2">&quot;RR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rotateRR</span>
<span class="n">rotate</span><span class="p">[</span><span class="s2">&quot;LL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rotateLL</span>

<span class="n">singleRotate</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">singleRotate</span><span class="p">[</span><span class="s2">&quot;R&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rotateRight</span>
<span class="n">singleRotate</span><span class="p">[</span><span class="s2">&quot;L&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rotateLeft</span>

<span class="k">class</span> <span class="nc">SplayTree</span><span class="p">:</span>

   <span class="k">class</span> <span class="nc">SplayNode</span><span class="p">:</span>
      <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">item</span> <span class="o">=</span> <span class="n">item</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>
         
      <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="n">st</span> <span class="o">=</span> <span class="s1">&#39;(&#39;</span>
         <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
            <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;*&#39;</span>
         <span class="k">else</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">)</span>
         <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">item</span><span class="p">)</span>
         <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
            <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;*&#39;</span>
         <span class="k">else</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">)</span>
         <span class="n">st</span> <span class="o">+=</span> <span class="s1">&#39;)&#39;</span>
         <span class="k">return</span> <span class="n">st</span>

   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="bp">None</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">rString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>


   <span class="c1"># Pass searching = True if just searching and not </span>
   <span class="c1"># really inserting. If the item is found, true is </span>
   <span class="c1"># returned. If the item is not found, an exception</span>
   <span class="c1"># containing false is raised. </span>

   <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">,</span><span class="n">searching</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

      <span class="k">def</span> <span class="nf">__insert</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="n">item</span><span class="p">):</span>
         <span class="sd">&#39;&#39;&#39; return the new root after inserting</span>
<span class="sd">             item into the tree currently rooted at </span>
<span class="sd">             root. If searching for the value and not </span>
<span class="sd">             inserting, then raise Exception(False) if </span>
<span class="sd">             the item is not found. </span>
<span class="sd">         &#39;&#39;&#39;</span>

         <span class="k">return</span> <span class="n">root</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">found</span> <span class="o">=</span> <span class="bp">False</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">__insert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span><span class="n">item</span><span class="p">)</span>

      <span class="c1"># Handle any single rotation that must </span>
      <span class="c1"># be done after inserting the value. </span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rString</span> <span class="ow">in</span> <span class="n">singleRotate</span><span class="p">:</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">singleRotate</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">rString</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">rString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">found</span>

   <span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">):</span>

      <span class="k">try</span><span class="p">:</span>
         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
      <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">inst</span><span class="p">:</span>
         <span class="k">if</span> <span class="n">inst</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

         <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">inst</span><span class="p">)</span>
            
   <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
         <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
         <span class="k">return</span> <span class="s2">&quot;&quot;</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
   <span class="c1"># This should print the following.</span>
   <span class="c1">#(*20*)</span>
   <span class="c1">#((*20*)30*)</span>
   <span class="c1">#(*5(*20(*30*)))</span>
   <span class="c1">#((*5*)8(*20(*30*)))</span>
   <span class="c1">#(((*5*)8((*20*)30*))42*)</span>
   <span class="c1">#(((*5*)8*)15((*20(*30*))42*))</span>
   <span class="c1">#(((*5*)8*)10(*15((*20(*30*))42*)))   </span>
   <span class="n">t</span> <span class="o">=</span> <span class="n">SplayTree2</span><span class="p">()</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
   <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
   <span class="n">t</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>   
   <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> <span class="n">main</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="figures-from-text">
<h2>10.3. Figures from Text<a class="headerlink" href="#figures-from-text" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id3">
<img alt="../_images/avlcase1.png" src="../_images/avlcase1.png" />
<p class="caption"><span class="caption-text">Fig. 1: AVL Tree Case 1 - No Pivot Node</span></p>
</div>
<div class="figure" id="id4">
<img alt="../_images/avlcase2.png" src="../_images/avlcase2.png" />
<p class="caption"><span class="caption-text">Fig. 2: AVL Tree Case 2 - No Rotate</span></p>
</div>
<div class="figure" id="id5">
<img alt="../_images/avlcase3a.png" src="../_images/avlcase3a.png" />
<p class="caption"><span class="caption-text">Fig. 3: AVL Tree Case 3A - Single Rotation</span></p>
</div>
<div class="figure" id="id6">
<img alt="../_images/avlcase3b.png" src="../_images/avlcase3b.png" />
<p class="caption"><span class="caption-text">Fig. 4: AVL Tree Case 3B - Double Rotation</span></p>
</div>
<div class="figure" id="id7">
<img alt="../_images/avlcase3bstep1.png" src="../_images/avlcase3bstep1.png" />
<p class="caption"><span class="caption-text">Fig. 5: AVL Tree Case 3B Step 1 Rotate Toward</span></p>
</div>
<div class="figure" id="id8">
<img alt="../_images/avlcase3bstep2.png" src="../_images/avlcase3bstep2.png" />
<p class="caption"><span class="caption-text">Fig. 6: AVL Tree Case 3B Step 2 Rotate Away</span></p>
</div>
<div class="figure" id="id9">
<img alt="../_images/rotateright.png" src="../_images/rotateright.png" />
<p class="caption"><span class="caption-text">Fig. 7: AVL Tree Case 3A Right Rotation</span></p>
</div>
<div class="figure" id="id10">
<img alt="../_images/rotateleft.png" src="../_images/rotateleft.png" />
<p class="caption"><span class="caption-text">Fig. 8: AVL Tree Case 3A Left Rotation</span></p>
</div>
<div class="figure" id="id11">
<img alt="../_images/rotate3BStep1and2.png" src="../_images/rotate3BStep1and2.png" />
<p class="caption"><span class="caption-text">Fig. 9: AVL Tree Case 3B Steps 1 and 2</span></p>
</div>
<div class="figure" id="id12">
<img alt="../_images/splayrightright.png" src="../_images/splayrightright.png" />
<p class="caption"><span class="caption-text">Fig. 10: Splay Tree Double-Right Rotate</span></p>
</div>
<div class="figure" id="id13">
<img alt="../_images/splayleftleft.png" src="../_images/splayleftleft.png" />
<p class="caption"><span class="caption-text">Fig. 11: Splay Tree Double-Left Rotate</span></p>
</div>
<div class="figure" id="id14">
<img alt="../_images/splayrightleft.png" src="../_images/splayrightleft.png" />
<p class="caption"><span class="caption-text">Fig. 12: Splay Tree Right-Left Rotate</span></p>
</div>
<div class="figure" id="id15">
<img alt="../_images/splayleftright.png" src="../_images/splayleftright.png" />
<p class="caption"><span class="caption-text">Fig. 13: Splay Tree Left-Right Rotate</span></p>
</div>
<div class="figure" id="id16">
<img alt="../_images/splaysample.png" src="../_images/splaysample.png" />
<p class="caption"><span class="caption-text">Fig. 14: Splay Tree Example</span></p>
</div>
<div class="figure" id="id17">
<img alt="../_images/InsertLookupAverage.png" src="../_images/InsertLookupAverage.png" />
<p class="caption"><span class="caption-text">Fig. 15: Average Insert/Lookup Time</span></p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../chap1/chap1.html">1. Python Programming 101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap2/chap2.html">2. Computational Complexity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap3/chap3.html">3. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap4/chap4.html">4. Sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap5/chap5.html">5. Sets and Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap6/chap6.html">6. Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap7/chap7.html">7. Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap11/chap11.html">8. Membership Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap8/chap8.html">9. Heaps</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">10. Balanced Binary Search Trees</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#avl-tree-implementations">10.1. AVL Tree Implementations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#iteratively-implemented-avl-tree">10.1.1. Iteratively Implemented AVL Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="#recursively-implemented-avl-tree">10.1.2. Recursively Implemented AVL Tree</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#splay-tree-implementations">10.2. Splay Tree Implementations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#iteratively-implemented-splay-tree">10.2.1. Iteratively Implemented Splay Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="#recursively-implemented-splay-tree">10.2.2. Recursively Implemented Splay Tree</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#figures-from-text">10.3. Figures from Text</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../chap10/chap10.html">11. B-Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chap12/chap12.html">12. Heuristic Search</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="../search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="../chap8/chap8.html" title="9. Heaps"
              >previous</a> |
            <a href="../chap10/chap10.html" title="11. B-Trees"
              >next</a> |
            <a href="../genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="../_sources/chap9/chap9.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, Kent D. Lee and Steve Hubbard.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>